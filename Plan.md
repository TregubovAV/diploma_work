# План автоматизации дипломного проекта

## Сценарии для автоматизации

### I. Позитивные сценарии (Happy path)

#### 1. Покупка тура по дебетовой карте (APPROVED)
- **Входные данные:** Валидная карта `4444 4444 4444 4441`, корректные дата, владелец и CVC.
- **Шаги:** Открыть форму оплаты, заполнить валидные данные, нажать "Продолжить".
- **Ожидаемый результат:** Появляется сообщение об успехе, в БД `payment_entity.status = APPROVED`, создаётся запись в `order_entity`.

#### 2. Покупка тура в кредит (APPROVED)
- **Входные данные:** Валидная карта `4444 4444 4444 4441`, корректные дата, владелец и CVC.
- **Шаги:** Открыть форму кредита, заполнить валидные данные, нажать "Продолжить".
- **Ожидаемый результат:** Успешное уведомление, в БД `credit_request_entity.status = APPROVED`, создаётся `order_entity`.

---

### II. Негативные сценарии — отклонённая карта (DECLINED)

#### 3. Покупка по отклонённой карте
- **Входные данные:** Карта `4444 4444 4444 4442`
- **Шаги:** Перейти на оплату, ввести данные, нажать "Продолжить"
- **Ожидаемый результат:** Сообщение об ошибке, `payment_entity.status = DECLINED`, запись в `order_entity` есть

#### 4. Кредит по отклонённой карте
- **Аналогично предыдущему**, но для формы кредита

---

### III. Проверка валидации — Пустые поля

#### 5–9. Отправка формы с пустыми значениями в каждом поле по очереди
- **Поля:** Номер карты, месяц, год, владелец, CVC
- **Ожидаемый результат:** Под соответствующим полем появляется сообщение об ошибке (формат/обязательность)

#### 10. Полностью пустая форма
- **Шаги:** Не заполнять ни одно поле
- **Ожидаемый результат:** Ошибки под всеми полями

---

### IV. Невалидные значения

#### 11. Невалидный номер карты (мусор)
- **Пример:** `1234 5678 9012 3456`
- **Ожидаемый результат:** Ошибка формата

#### 12. Месяц: 13 / 00 / прошедший
- **Пример:** `13`, `00`, текущий месяц -1
- **Ожидаемый результат:** Сообщение "Неверно указан срок действия карты"

#### 13. Год: `00`, `текущий + 7`
- **Ожидаемый результат:** Ошибка "Неверно указан срок действия карты"

#### 14. Владелец: кириллица, спецсимволы, цифры
- **Примеры:** `Иванов`, `@#$%`, `12345`
- **Ожидаемый результат:** Ошибка "Неверный формат"

#### 15. CVC: меньше 3-х символов, буквы
- **Примеры:** `1`, `ab1`, `0`
- **Ожидаемый результат:** Ошибка "Неверный формат"

---

### V. Эквивалентные классы и граничные значения

#### 16. Длинное имя владельца (>50 символов)
- **Пример:** `Jonathan Livingston Seagull the Third`
- **Ожидаемый результат:** Ошибка или обрезка (поведение фиксируется)

#### 17. CVC: `000`
- **Ожидаемый результат:** Принятие/отклонение в зависимости от правил

#### 18. Карта не из известного списка (например, `4000 0000 0000 0002`)
- **Ожидаемый результат:** Отклонение операции, `DECLINED`

---

## Итого

Покрываются:
- Все поля формы (валидность и обязательность)
- Успешные и неуспешные сценарии
- Реакция системы на невалидный ввод
- Проверка записей в БД (`payment_entity`, `credit_request_entity`, `order_entity`)


## Используемые инструменты

- **Selenide + JUnit5** — удобные и стабильные UI-тесты.
- **Apache DBUtils** — упрощает работу с БД (SQL).
- **Faker** — генерация случайных данных.
- **Allure** — наглядная отчётность по шагам, скриншотам.
- **Docker + docker-compose** — управление окружением.
- **Gradle** — запуск, отчёты и зависимости.

## Возможные риски

- Сложности в переключении между MySQL и PostgreSQL.
- Баги в логике приложения, влияющие на стабильность тестов.
- Проблемы с запуском симулятора банка или `aqa-shop.jar`.
- Непредсказуемое поведение на нестабильных картах.

## Оценка трудозатрат (интервал в часах)

| Этап                        | Время (ч) |
|----------------------------|-----------|
| Подготовка окружения       | 1–2       |
| UI-тесты                   | 4–6       |
| SQL-тесты                  | 4–6       |
| Настройка Allure и отчётов | 2–3       |
| Написание документации     | 2–4       |
| Резерв                     | 3–4       |
| **ИТОГО**                  | **16–25** |

## План сдачи

- **День 1:** Подготовка окружения, `Plan.md`, запуск jar.
- **День 2–4:** Разработка UI- и SQL-тестов, Allure.
- **День 5:** Сбор отчётов, оформление багов.
- **День 5:** Финальная проверка и сдача проекта.